# xgboosttraining

Script for the gamma-hadron separation, optimization and lookups creation for H.E.S.S. using xgboost.

Author: Rodrigo Guedes Lang (rodrigo.lang@fau.de) based on scripts from many people such as Lars Morhmann, Simon Steinmassl, Laura Olivera-Nieto, Florian Eichhorn and Vikas Joshi.

# usage

Just choose which steps and options to be run in your input config file (see example in config.yaml) and simply run: python runSeparationTraining.py <configfile>

  In an ideal world it should work fine, in a slightly less ideal work the error should be found by the script and printed and thus be easy to correct. In a real world, news bugs and specific cases will appear, if so, please write me on Slack or send me an e-mail.
  
# directory structure
  
  The following files/directory are needed for the master script:

 \<mainFolder>/lists containing the MC/runs lists with the following filename structure <TypeOfData>-<phase>-<zenith>deg-<azimuth>deg-<offset>deg.lis for gamma and <TypeOfData>-<phase>-<zenith>deg-<azimuth>deg.lis for gamma-diffusive or background, e.g., Gamma-2d2-20deg-180deg-0.5deg.lis or Offruns-2d3-20deg-180deg.lis

 <mainFolder>/<trainingName>/config/ containing the configs, similarly to what is found in /lfs/l7/hess/analysis/version36, e.g.:
        <mainFolder>/<trainingName>/config/head.conf and <mainFolder>/<trainingName>/config/std_zeta_hybrid/analysis.conf

          
          For each training and config several new folder will contain the information about the training, but these will be created by the script for the first time:

          - <mainFolder>/<trainingName>/hap contains the events trees and logs generated by hap

          - <mainFolder>/<trainingName>/logs contains the main logs

          - <mainFolder>/<trainingName>/plots contains the plots of input distributions and output plots from the training

          - <mainFolder>/<trainingName>/optimization contains the results and plots from the cut optimization
    
          - <mainFolder>/<trainingName>/temp_scripts contains some temporary scripts created by the master script
          
# to-do list
          
  - Use a smart way for the script to know if it's mono, hybrid or stereo;
  - Get rid of the flags used in hap for mono, hybrid, stereo, zeta, etc. These don't go well with event classes;
  - Include automatic optimization of hyper parameters as default.
